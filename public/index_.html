<!DOCTYPE html>
<html lang="ko">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>videdit</title>
      <script>
         function uploadFile(event) {
            event.preventDefault();

            var formData = new FormData();
            var fileField = document.querySelector("#upload_file");

            if (!fileField.files.length) {
               return;
            }

            formData.append("upload_file", fileField.files[0]);

            fetch("/upload", {
               method: "POST",
               body: formData,
            })
               .then((response) => response.json())
               .then((data) => {
                  if (data) {
                     var list = document.getElementById("upload_list");
                     var newItem = document.createElement("li");
                     newItem.textContent = `ID: ${data.id}, 파일명: ${data.file_name}`;
                     list.appendChild(newItem);

                     fileField.value = "";
                  }
               })
               .catch((error) => {
                  console.error("Error:", error);
               });
         }
      </script>
   </head>
   <body>
      <h1>동영상 업로드</h1>
      <form id="upload_form" onsubmit="uploadFile(event)">
         <input type="file" id="upload_file" name="upload_file" />
         <input type="submit" value="업로드" />
      </form>
      <ol id="upload_list"></ol>
   </body>
</html>
